
# ğŸ§  FRRouting Demo1 

## ğŸ“¡ æ‹“æ¨¸åœ–

```
        net100                      net200
   192.168.100.0/24            192.168.200.0/24
         |                            |                   
      [frr100] ------------------- [frr200] 
      AS 65000                     AS 65001
      192.168.100.100              192.168.200.200
      192.168.101.100  <-connect-> 192.168.101.200
```

---

## ğŸ“˜ ç¯€é»è§€å¯Ÿï¼šr1 (AS 65000)

### `show ip route`
```
B>* 192.168.200.0/24 [20/0] via 192.168.101.200, eth1
C>* 192.168.101.0/24 is directly connected, eth1
C>* 192.168.100.0/24 is directly connected, eth0
```

| ç¬¦è™Ÿ/ä»£ç¢¼    | æ„ç¾©                              |
| -------- | ------------------------------- |
| `C`      | Connectedï¼Œç›´é€£è·¯ç”±ï¼ˆæœ¬åœ°ä»‹é¢ï¼‰            |
| `B`      | BGP å­¸ä¾†çš„è·¯ç”±                       |
| `*`      | FIB routeï¼ˆå·²å¯«å…¥ Linux kernelï¼‰     |
| `>`      | Selected routeï¼ˆé¸ç‚ºæœ€ä½³è·¯ç”±ï¼‰          |
| `via`    | æŒ‡å®šä¸‹ä¸€è·³ IP èˆ‡å‡ºä»‹é¢                   |
| `[20/0]` | BGP è·¯ç”±åº¦é‡ï¼ˆLocalPref/Metricï¼‰é è¨­ 20 |

- `C>* 192.168.100.0/24`ï¼šæœ¬åœ°ç›´é€£ç¶²æ®µ
- `C>* 192.168.101.0/24`ï¼šèˆ‡ r2 å°æ¥çš„ä»‹é¢
- `B>* 192.168.200.0/24`ï¼šé€é BGP å¾ r2 å­¸åˆ°
- FIB: Forwarding Information Base, å¯¦éš›ç”± Linux kernel æˆ–ç¡¬é«”è½‰é€å°åŒ…æ™‚åƒè€ƒçš„è·¯ç”±è¡¨
- RIB: Routing Information Base, Routing daemonï¼ˆå¦‚ bgpdï¼‰ç¶­è­·çš„æ‰€æœ‰å¯èƒ½è·¯ç”±é›†åˆ
- åœ¨ FRR ä¸­ï¼Œzebra daemon æœƒå¾ RIB ä¸­é¸å‡ºæœ€ä½³è·¯ç”±ï¼ˆbest pathï¼‰ï¼Œä¸¦å¯«å…¥ FIB
- é€™äº›è¢«å®‰è£é€² FIB çš„è·¯ç”±ï¼Œæ‰æœƒå‡ºç¾åœ¨ä½ ç”¨ Linux æŒ‡ä»¤ ip route æŸ¥åˆ°çš„è¡¨ä¸­ã€‚

### `show ip bgp summary`
- é„°å±…ï¼š192.168.101.200
- ç‹€æ…‹ï¼šEstablishedï¼Œæ¥æ”¶ prefixï¼š1
- è¨Šæ¯æ”¶é€æ­£å¸¸ï¼Œuptime ç´„ 3 åˆ†é˜

### `show ip bgp`
- å®£å‘Šæœ¬åœ° `192.168.100.0/24`
- å­¸åˆ° r2 å®£å‘Šçš„ `192.168.200.0/24`ï¼ŒAS Path ç‚º 65001 i

### `show interface`
- eth0: 192.168.100.100/24
- eth1: 192.168.101.100/24
- æ‰€æœ‰ä»‹é¢æ­£å¸¸é‹ä½œ

### `show zebra`
- ç„¡ç•°å¸¸ï¼Œåƒ…åˆ—å‡ºçµ±è¨ˆæ¡†æ¶

---

## ğŸ“˜ ç¯€é»è§€å¯Ÿï¼šr2 (AS 65001)

### `show ip route`
- `C>* 192.168.101.0/24`ã€`C>* 192.168.200.0/24`ï¼šç›´é€£
- `B>* 192.168.100.0/24`ï¼šé€é BGP å¾ r1 å­¸åˆ°

### `show ip bgp summary`
- é„°å±…ï¼š192.168.101.100
- ç‹€æ…‹ï¼šEstablishedï¼Œæ¥æ”¶ prefixï¼š1

### `show ip bgp`
- å®£å‘Šæœ¬åœ° `192.168.200.0/24`
- å­¸åˆ° r1 å®£å‘Šçš„ `192.168.100.0/24`ï¼ŒAS Path ç‚º 65000 i

### `show interface`
- eth0: 192.168.101.200/24
- eth1: 192.168.200.200/24
- æ‰€æœ‰ä»‹é¢æ­£å¸¸

### `show zebra`
- Route installs = 4ï¼Œè¡¨ç¤ºè·¯ç”±å·²æˆåŠŸäº¤ç”± kernel å¯«å…¥

---

## ğŸ“Š å°ç…§ç¸½çµ

| é …ç›®             | r1                            | r2                            |
|------------------|-------------------------------|-------------------------------|
| ASN              | 65000                         | 65001                         |
| å®£å‘Šç¶²æ®µ         | 192.168.100.0/24              | 192.168.200.0/24              |
| å­¸åˆ°ç¶²æ®µ         | 192.168.200.0/24 (BGP)        | 192.168.100.0/24 (BGP)        |
| BGP é„°å±… IP      | 192.168.101.200               | 192.168.101.100               |
| BGP ç‹€æ…‹         | Established                   | Established                   |
| æ¥æ”¶ Prefix æ•¸é‡ | 1                             | 1                             |
| Interface        | eth0/eth1 = 100.100 / 101.100 | eth0/eth1 = 101.200 / 200.200 |

---

âœ… **å¯¦é©—æˆåŠŸç¢ºèª**ï¼š
- r1 â†” r2 é–“çš„ BGP peering å»ºç«‹æˆåŠŸ
- é›™æ–¹æˆåŠŸäº¤æ›å„è‡ªå®£å‘Šçš„ç¶²æ®µ
- æ‰€æœ‰ä»‹é¢èˆ‡ zebra kernel routing ç‹€æ…‹çš†æ­£å¸¸
